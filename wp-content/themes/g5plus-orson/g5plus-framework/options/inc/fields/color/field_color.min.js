(function(a){'use strict';redux.field_objects=redux.field_objects||{},redux.field_objects.color=redux.field_objects.color||{},a(document).ready(function(){}),redux.field_objects.color.init=function(b){b||(b=a(document).find('.redux-group-tab:visible').find('.redux-container-color:visible')),a(b).each(function(){var c=a(this),d=c;if(c.hasClass('redux-field-container')||(d=c.parents('.redux-field-container:first')),!d.is(':hidden')){if(d.hasClass('redux-field-init'))d.removeClass('redux-field-init');else return;c.find('.redux-color-init').wpColorPicker({change:function(e){redux_change(a(this)),c.find('#'+e.target.getAttribute('data-id')+'-transparency').removeAttr('checked'),c.find('.colors > span').removeClass('active')},clear:function(){redux_change(a(this).parent().find('.redux-color-init'))}}),c.find('.redux-color').on('focus',function(){a(this).data('oldcolor',a(this).val())}),c.find('.redux-color').on('keyup',function(){var e=a(this).val(),f=colorValidate(this),g='#'+a(this).attr('id');'transparent'===e?(a(this).parent().parent().find('.wp-color-result').css('background-color','transparent'),c.find(g+'-transparency').attr('checked','checked'),c.find('.colors > span').removeClass('active')):(c.find(g+'-transparency').removeAttr('checked'),f&&f!==a(this).val()&&a(this).val(f),c.find('.colors > span').removeClass('active'),c.find('.colors > span').each(function(){var h=a(this).attr('data-color');e.toLowerCase()==h.toLowerCase()&&a(this).addClass('active')}))}),c.find('.redux-color').on('blur',function(){var e=a(this).val(),f='#'+a(this).attr('id');'transparent'===e?(a(this).parent().parent().find('.wp-color-result').css('background-color','transparent'),c.find(f+'-transparency').attr('checked','checked'),c.find('.colors > span').removeClass('active')):(colorValidate(this)===e&&0!==e.indexOf('#')&&a(this).val(a(this).data('oldcolor')),c.find(f+'-transparency').removeAttr('checked'),c.find('.colors > span').removeClass('active'),c.find('.colors > span').each(function(){var g=a(this).attr('data-color');e.toLowerCase()==g.toLowerCase()&&a(this).addClass('active')}))}),c.find('.redux-color').on('keydown',function(){a(this).data('oldkeypress',a(this).val())}),c.find('.color-transparency').on('click',function(){if(a(this).is(':checked'))c.find('.redux-saved-color').val(a('#'+a(this).data('id')).val()),c.find('#'+a(this).data('id')).val('transparent'),c.find('#'+a(this).data('id')).parent().parent().find('.wp-color-result').css('background-color','transparent'),c.closest('.redux-field').find('.wp-color-result').css('background-color','transparent');else if('transparent'===c.find('#'+a(this).data('id')).val()){var e=a('.redux-saved-color').val();''===e&&(e=a('#'+a(this).data('id')).data('default-color')),c.find('#'+a(this).data('id')).parent().parent().find('.wp-color-result').css('background-color',e),c.closest('.redux-field').find('.wp-color-result').css('background-color',e),c.find('#'+a(this).data('id')).val(e)}}),c.find('.colors > span').on('click',function(){c.find('.colors > span').removeClass('active'),a(this).addClass('active');var e=a(this).attr('data-color');c.find('.redux-saved-color').val(e),c.find('#'+a(this).data('id')).val(e),c.find('#'+a(this).data('id')).parent().parent().find('.wp-color-result').css('background-color',e),c.closest('.redux-field').find('.wp-color-result').css('background-color',e)})}})}})(jQuery);